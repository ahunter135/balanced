"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[98],{7258:(w,h,_)=>{_.d(h,{N1:()=>e});const e=(0,_(2726).fo)("Keyboard")},1695:(w,h,_)=>{_.d(h,{m:()=>S});var C=_(5861),e=_(6689),t=_(7258),T=_(3251),f=_(6814),y=_(95),g=_(5548);const b=["nameInput"],x=["fieldsContainer"];function M(a,u){1&a&&(e.TgZ(0,"span",9),e._uU(1,"Remaining"),e.qZA())}function Z(a,u){if(1&a){const n=e.EpF();e.TgZ(0,"ion-icon",15),e.NdJ("click",function(){e.CHM(n);const s=e.oxw().$implicit,p=e.oxw(2);return e.KtG(p.deleteCategory(p.category,s))}),e.qZA()}}function v(a,u){if(1&a){const n=e.EpF();e.TgZ(0,"span",16),e.NdJ("click",function(){e.CHM(n);const s=e.oxw().index,p=e.oxw(2);return e.KtG(p.openBudgetItem(s))}),e.TgZ(1,"ion-label"),e._uU(2),e.qZA(),e.TgZ(3,"ion-note",17),e._uU(4),e.qZA()()}if(2&a){const n=e.oxw().$implicit,i=e.oxw(2);e.xp6(2),e.Oqu(n.text),e.xp6(1),e.Q6J("ngClass",i.getSubcategoryRemainingAmount(n)<0?"negative":""),e.xp6(1),e.hij(" ",i.formatCurrency(i.getSubcategoryRemainingAmount(n))," ")}}function O(a,u){if(1&a){const n=e.EpF();e.TgZ(0,"span",18)(1,"ion-input",19,20),e.NdJ("ngModelChange",function(s){e.CHM(n);const p=e.oxw().$implicit;return e.KtG(p.text=s)})("ionFocus",function(){e.CHM(n);const s=e.oxw(3);return e.KtG(s.stopTimeout())})("ionBlur",function(){e.CHM(n);const s=e.oxw(3);return e.KtG(s.shouldWeSaveOrRemove())})("keyup.enter",function(){e.CHM(n);const s=e.oxw(3);return e.KtG(s.triggerIonBlur())})("keydown",function(s){e.CHM(n);const p=e.oxw(3);return e.KtG(p.hideKeyboard(s))}),e.qZA(),e.TgZ(3,"ion-note",21),e._uU(4),e.ALo(5,"currency"),e.qZA()()}if(2&a){const n=e.oxw().$implicit,i=e.oxw(2);e.xp6(1),e.Q6J("ngModel",n.text),e.xp6(3),e.Oqu(e.lcZ(5,2,i.getSubcategoryRemainingAmount(n)))}}function A(a,u){if(1&a&&(e.TgZ(0,"ion-item",11),e.YNc(1,Z,1,0,"ion-icon",12),e.YNc(2,v,5,3,"span",13),e.YNc(3,O,6,4,"span",14),e.qZA()),2&a){const n=u.$implicit,i=e.oxw(2);e.Q6J("button",!n.isEditing&&!i.isUserRemovingCategories),e.xp6(1),e.Q6J("ngIf",i.isUserRemovingCategories),e.xp6(1),e.Q6J("ngIf",!n.isEditing),e.xp6(1),e.Q6J("ngIf",n.isEditing)}}function E(a,u){if(1&a&&(e.TgZ(0,"span"),e.YNc(1,A,4,4,"ion-item",10),e.qZA()),2&a){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.subcategories)}}function l(a,u){if(1&a){const n=e.EpF();e.TgZ(0,"ion-item",23),e.NdJ("click",function(){const p=e.CHM(n).index,U=e.oxw(2);return e.KtG(U.selectSubCategory(p))}),e.TgZ(1,"ion-label",24),e._uU(2),e.qZA()()}if(2&a){const n=u.$implicit;e.xp6(2),e.Oqu(n.text)}}function m(a,u){if(1&a&&(e.TgZ(0,"span"),e.YNc(1,l,3,1,"ion-item",22),e.qZA()),2&a){const n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.subcategories)}}function o(a,u){if(1&a){const n=e.EpF();e.TgZ(0,"ion-item")(1,"ion-label",25),e.NdJ("click",function(){e.CHM(n);const s=e.oxw();return e.KtG(s.addNewSub())}),e._UZ(2,"ion-icon",26),e._uU(3," Add New Category "),e.qZA()()}}function r(a,u){if(1&a){const n=e.EpF();e.TgZ(0,"div",27)(1,"ion-button",28),e.NdJ("click",function(){e.CHM(n);const s=e.oxw();return e.KtG(s.deleteCategory(s.category,void 0))}),e.TgZ(2,"ion-icon",29),e.NdJ("click",function(){e.CHM(n);const s=e.oxw();return e.KtG(s.deleteCategory(s.category,void 0))}),e.qZA()()()}}const c=function(a){return{"padding-right":a}},d=function(a){return{width:a}};let S=(()=>{class a{constructor(n){this.alertService=n,this.isChecklist=!1,this.isUserReorderingCategories=!1,this.isUserRemovingCategories=!1,this.addNewSubEvent=new e.vpe,this.requestSaveOfSubs=new e.vpe,this.subcategorySelected=new e.vpe,this.requestDeleteCategory=new e.vpe,this.transactions=[]}ngOnInit(){this.checkDOMChange()}addNewSub(){this.addNewSubEvent.emit()}triggerIonBlur(){this.shouldWeSaveOrRemove()}checkDOMChange(){this.checker=setTimeout(()=>{const n=document.getElementsByClassName("new-sub");n.length>0&&n[0].childNodes[0].setFocus(),this.checkDOMChange()},100)}getSubcategoryRemainingAmount(n){return this.category.id?"income"===this.category.id?n.actual_amount+-1*n.planned_amount:n.planned_amount-n.actual_amount:0}stopTimeout(){clearTimeout(this.checker)}shouldWeSaveOrRemove(){this.subcategories.find(i=>i.isEditing)&&this.requestSaveOfSubs.emit()}deleteCategory(n,i){var s=this;return(0,C.Z)(function*(){"income"!==n.id||i?s.requestDeleteCategory.emit({cat:n,sub:i}):s.alertService.createAndShowToast("You cannot delete the income category")})()}openBudgetItem(n){var i=this;return(0,C.Z)(function*(){i.subcategorySelected.emit({sub:i.subcategories[n],cat:i.category})})()}selectSubCategory(n){this.subcategorySelected.emit(this.subcategories[n])}hideKeyboard(n){("Enter"==n.key||"enter"==n.key)&&t.N1.hide()}formatCurrency(n){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(n<0?-n:n)}}return a.\u0275fac=function(n){return new(n||a)(e.Y36(T.c))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-category"]],viewQuery:function(n,i){if(1&n&&(e.Gf(b,5),e.Gf(x,5)),2&n){let s;e.iGM(s=e.CRH())&&(i.nameInput=s.first),e.iGM(s=e.CRH())&&(i.fieldsContainer=s.first)}},inputs:{category:"category",subcategories:"subcategories",isChecklist:"isChecklist",chosenDate:"chosenDate",isUserReorderingCategories:"isUserReorderingCategories",isUserRemovingCategories:"isUserRemovingCategories"},outputs:{addNewSubEvent:"addNewSubEvent",requestSaveOfSubs:"requestSaveOfSubs",subcategorySelected:"subcategorySelected",requestDeleteCategory:"requestDeleteCategory"},decls:14,vars:13,consts:[[3,"ngStyle","id"],[2,"display","flex","align-items","center","justify-content","space-between"],[3,"ngStyle"],["id","subtitle"],["id","title"],["id","category",4,"ngIf"],["lines","none"],[4,"ngIf"],["style","display: flex; justify-content: flex-end",4,"ngIf"],["id","category"],["class","target","detail","false",3,"button",4,"ngFor","ngForOf"],["detail","false",1,"target",3,"button"],["style","color: var(--ion-color-danger); padding-right: 10px","name","remove-circle-outline",3,"click",4,"ngIf"],["class","saved-sub",3,"click",4,"ngIf"],["class","new-sub",4,"ngIf"],["name","remove-circle-outline",2,"color","var(--ion-color-danger)","padding-right","10px",3,"click"],[1,"saved-sub",3,"click"],[2,"text-align","end",3,"ngClass"],[1,"new-sub"],["placeholder","Name","autocapitalize","sentences","enterkeyhint","done","autocorrect","on",3,"ngModel","ngModelChange","ionFocus","ionBlur","keyup.enter","keydown"],["nameInput",""],[2,"text-align","end"],["class","target","button","",3,"click",4,"ngFor","ngForOf"],["button","",1,"target",3,"click"],["labelPlacement","start"],[1,"add-new",2,"cursor","pointer",3,"click"],["name","add"],[2,"display","flex","justify-content","flex-end"],["fill","clear","size","medium",3,"click"],["name","remove-circle-outline","slot","icon-only",2,"color","var(--ion-color-danger)",3,"click"]],template:function(n,i){1&n&&(e.TgZ(0,"ion-card",0)(1,"div",1)(2,"div",2)(3,"ion-card-header")(4,"ion-card-subtitle",3)(5,"span",4),e._uU(6),e.qZA(),e.YNc(7,M,2,0,"span",5),e.qZA()(),e.TgZ(8,"ion-card-content")(9,"ion-list",6),e.YNc(10,E,2,1,"span",7),e.YNc(11,m,2,1,"span",7),e.YNc(12,o,4,0,"ion-item",7),e.qZA()()(),e.YNc(13,r,3,0,"div",8),e.qZA()()),2&n&&(e.MGl("id","",i.category.id,"-card"),e.Q6J("ngStyle",e.VKq(9,c,i.isUserReorderingCategories?"34px":"0")),e.xp6(2),e.Q6J("ngStyle",e.VKq(11,d,i.isUserRemovingCategories&&"income"!==i.category.id?"90%":"100%")),e.xp6(4),e.Oqu(i.category.id),e.xp6(1),e.Q6J("ngIf",!i.isChecklist),e.xp6(3),e.Q6J("ngIf",!i.isChecklist),e.xp6(1),e.Q6J("ngIf",i.isChecklist),e.xp6(1),e.Q6J("ngIf",!i.isChecklist),e.xp6(1),e.Q6J("ngIf",i.isUserRemovingCategories&&"income"!==i.category.id))},dependencies:[f.mk,f.sg,f.O5,f.PC,y.JJ,y.On,g.YG,g.PM,g.FN,g.Zi,g.tO,g.gu,g.pK,g.Ie,g.Q$,g.q_,g.uN,g.j9,f.H9],styles:["ion-card[_ngcontent-%COMP%]{margin:0 0 28px}.add-new[_ngcontent-%COMP%]{font-size:small;opacity:.6;display:flex;flex-direction:row;align-items:center;justify-content:center}.new-sub[_ngcontent-%COMP%], .saved-sub[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;width:100%}.saved-sub[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{width:100%}#subtitle[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}.negative[_ngcontent-%COMP%]{color:#f14242}"]}),a})()},98:(w,h,_)=>{_.d(h,{m:()=>E});var C=_(5861),e=_(5548),t=_(6689),T=_(6635),f=_(6814),y=_(95),g=_(8647),b=_(1695);function x(l,m){if(1&l){const o=t.EpF();t.TgZ(0,"ion-datetime",14),t.NdJ("ionChange",function(c){t.CHM(o);const d=t.oxw();return t.KtG(d.dateChanged(c))}),t.qZA()}2&l&&t.Q6J("preferWheel",!0)}function M(l,m){if(1&l&&(t.TgZ(0,"p"),t._uU(1),t.qZA()),2&l){const o=t.oxw();t.xp6(1),t.Oqu(o.selectedSub)}}const Z=function(){return[]};function v(l,m){if(1&l){const o=t.EpF();t.TgZ(0,"span")(1,"app-category",22),t.NdJ("subcategorySelected",function(c){const S=t.CHM(o).$implicit,a=t.oxw(2);return t.KtG(a.subcategorySelected(c,S))}),t.qZA()()}if(2&l){const o=m.$implicit;let r;t.xp6(1),t.Q6J("category",o)("isChecklist",!0)("subcategories",null!==(r=o.subcategories)&&void 0!==r?r:t.DdM(3,Z))}}function O(l,m){if(1&l){const o=t.EpF();t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),t._uU(3,"Pick a Category"),t.qZA(),t.TgZ(4,"ion-buttons",1)(5,"ion-button",2),t.NdJ("click",function(){t.CHM(o),t.oxw();const c=t.MAs(43);return t.KtG(c.dismiss())}),t._uU(6,"Close"),t.qZA()()()(),t.TgZ(7,"ion-content")(8,"div",15),t.YNc(9,v,2,4,"span",16),t.TgZ(10,"span",17)(11,"ion-card",18)(12,"ion-card-header")(13,"ion-card-subtitle",19)(14,"span",20),t._uU(15,"None"),t.qZA()()(),t.TgZ(16,"ion-card-content")(17,"ion-item",21),t.NdJ("click",function(){t.CHM(o);const c=t.oxw();return t.KtG(c.selectedNoSub())}),t.TgZ(18,"ion-label"),t._uU(19,"Uncategorized"),t.qZA()()()()()()()}if(2&l){const o=t.oxw();t.xp6(9),t.Q6J("ngForOf",o.categories)}}const A=function(){return{prefix:"$ ",thousands:",",decimal:"."}};let E=(()=>{class l{constructor(o,r,c){this.modalCtrl=o,this.transactionPublisher=r,this.alertCtrl=c,this.transactionAmountUserView=0}ngOnInit(){var o=this;return(0,C.Z)(function*(){o.isIncome=o.transaction.amount<0,o.transactionAmountUserView=o.getAmount()})()}ngAfterViewInit(){var o=this;return(0,C.Z)(function*(){const r=o.transaction.date.getTimezoneOffset(),c=new Date(o.transaction.date.getTime()-60*r*1e3);o.ionDatetime.value=c.toISOString()})()}save(){var o=this;return(0,C.Z)(function*(){o.transaction.amount=o.isIncome?-o.transactionAmountUserView:o.transactionAmountUserView,console.log(o.transaction),o.transactionPublisher.publishEvent({from:"manual",addedTransactions:[],modifiedTransactions:[o.transaction],removedTransactions:[]}),o.modalCtrl.dismiss()})()}subcategorySelected(o,r){this.modalCtrl.dismiss(),this.transaction.subcategoryId=o.id,this.isIncome="income"===r.id}selectedNoSub(){this.modalCtrl.dismiss(),this.transaction.subcategoryId="",this.isIncome=!1}dateChanged(o){this.transaction.date=new Date(o.detail.value)}getAmount(){return this.transaction.amount>=0?this.transaction.amount:-this.transaction.amount}deleteTransaction(){var o=this;return(0,C.Z)(function*(){(yield o.alertCtrl.create({message:"Are You Sure?",buttons:[{text:"Yes",role:"destructive",handler:()=>{o.transactionPublisher.publishEvent({from:"manual",addedTransactions:[],modifiedTransactions:[],removedTransactions:[o.transaction]}),o.modalCtrl.dismiss()}},{text:"No",role:"cancel"}]})).present()})()}}return l.\u0275fac=function(o){return new(o||l)(t.Y36(e.IN),t.Y36(T.u),t.Y36(e.Br))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-transaction-sorter"]],viewQuery:function(o,r){if(1&o&&t.Gf(e.x4,5),2&o){let c;t.iGM(c=t.CRH())&&(r.ionDatetime=c.first)}},decls:45,vars:8,consts:[["color","primary"],["slot","start"],[3,"click"],["slot","end"],["name","trash-outline"],["slot","end","datetime","datetime"],["slot","end","placeholder","$0.00","type","decimal","currencyMask","","inputmode","decimal",1,"ngx-currency-input",3,"ngModel","options","ngModelChange"],["placeholder","Name","slot","end","type","text",3,"ngModel","ngModelChange"],[3,"keepContentsMounted"],["lines","none"],["button","","id","open-modal"],[4,"ngIf"],["trigger","open-modal",3,"presentingElement"],["modal",""],["id","datetime","presentation","date",3,"preferWheel","ionChange"],[2,"width","90%","margin","28px auto 0 auto"],[4,"ngFor","ngForOf"],["id","no-category"],[2,"margin","0 0 28px 0"],["id","subtitle"],["id","title"],["button","","lines","none",1,"target",3,"click"],[3,"category","isChecklist","subcategories","subcategorySelected"]],template:function(o,r){1&o&&(t.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1)(3,"ion-button",2),t.NdJ("click",function(){return r.modalCtrl.dismiss()}),t._uU(4,"Cancel"),t.qZA()(),t.TgZ(5,"ion-title"),t._uU(6,"Update Transaction"),t.qZA(),t.TgZ(7,"ion-buttons",3)(8,"ion-button",2),t.NdJ("click",function(){return r.deleteTransaction()}),t._UZ(9,"ion-icon",4),t.qZA(),t.TgZ(10,"ion-button",2),t.NdJ("click",function(){return r.save()}),t._uU(11,"Save"),t.qZA()()()(),t.TgZ(12,"ion-content")(13,"ion-card")(14,"ion-card-content")(15,"ion-list")(16,"ion-item")(17,"ion-label"),t._uU(18,"Date"),t.qZA(),t._UZ(19,"ion-datetime-button",5),t.qZA(),t.TgZ(20,"ion-item")(21,"ion-label"),t._uU(22,"Amount"),t.qZA(),t.TgZ(23,"input",6),t.NdJ("ngModelChange",function(d){return r.transactionAmountUserView=d}),t.qZA()(),t.TgZ(24,"ion-item")(25,"ion-label"),t._uU(26,"Transaction"),t.qZA(),t.TgZ(27,"ion-input",7),t.NdJ("ngModelChange",function(d){return r.transaction.name=d}),t.qZA()(),t.TgZ(28,"ion-item")(29,"ion-label"),t._uU(30,"Merchant"),t.qZA(),t.TgZ(31,"ion-input",7),t.NdJ("ngModelChange",function(d){return r.transaction.merchant_name=d}),t.qZA()()(),t.TgZ(32,"ion-modal",8),t.YNc(33,x,1,1,"ng-template"),t.qZA()()(),t.TgZ(34,"ion-card")(35,"ion-card-content")(36,"ion-list",9)(37,"ion-item",10)(38,"ion-label"),t._uU(39,"Budget Category"),t.qZA(),t._UZ(40,"br"),t.YNc(41,M,2,1,"p",11),t.qZA()()()(),t.TgZ(42,"ion-modal",12,13),t.YNc(44,O,20,1,"ng-template"),t.qZA()()),2&o&&(t.xp6(23),t.Q6J("ngModel",r.transactionAmountUserView)("options",t.DdM(7,A)),t.xp6(4),t.Q6J("ngModel",r.transaction.name),t.xp6(4),t.Q6J("ngModel",r.transaction.merchant_name),t.xp6(1),t.Q6J("keepContentsMounted",!0),t.xp6(9),t.Q6J("ngIf",r.transaction.subcategoryId),t.xp6(1),t.Q6J("presentingElement",r.presentingElement))},dependencies:[f.sg,f.O5,y.Fj,y.JJ,y.On,e.YG,e.Sm,e.PM,e.FN,e.Zi,e.tO,e.W2,e.x4,e.Mj,e.Gu,e.gu,e.pK,e.Ie,e.Q$,e.q_,e.wd,e.sr,e.ki,e.QI,e.j9,g.xv,b.m],styles:["#segment[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}#segment[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]{width:90%;margin-top:25px}ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{color:#fff}ion-toolbar[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{color:#fff}ion-input[_ngcontent-%COMP%]{text-align:end}ion-datetime-button[_ngcontent-%COMP%]::part(native){background:#fff;padding-right:5px}"]}),l})()}}]);