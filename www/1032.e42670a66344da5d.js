"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[1032],{1032:(k,l,a)=>{a.r(l),a.d(l,{CreateAccountPageModule:()=>Z});var p=a(6814),g=a(95),d=a(5548),u=a(2607),c=a(5861),r=a(6825),e=a(6689),h=a(3251),m=a(1776),f=a(5209),v=a(7195),y=a(1823),x=a(7760);function P(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",3)(1,"div",4)(2,"h1",5),e._uU(3,"Create Account"),e.qZA()(),e.TgZ(4,"div",6)(5,"div",7),e._UZ(6,"app-form-item",8),e.qZA(),e.TgZ(7,"div",9),e._UZ(8,"app-form-item",10),e.qZA(),e.TgZ(9,"div",11),e._UZ(10,"app-form-item",12),e.qZA(),e.TgZ(11,"div",13)(12,"app-login-button",14),e.NdJ("buttonClick",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.signUp())}),e.qZA()()(),e.TgZ(13,"div",15),e.NdJ("mousedown",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.loginFocused=!0)})("mouseup",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.loginFocused=!1)})("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.navigateToLogin())}),e.TgZ(14,"span",16),e._uU(15,"Back to Login"),e.qZA()()()}if(2&o){const t=e.oxw();e.Q6J("@createForm",void 0),e.xp6(6),e.Q6J("model",t.user),e.xp6(2),e.Q6J("model",t.user),e.xp6(2),e.Q6J("model",t.user),e.xp6(4),e.Q6J("@login",t.loginFocused?"focused":"blurred")}}function C(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",17)(1,"div",4)(2,"h1",18),e._uU(3," \u{1f6e1}\ufe0f Your Secure Backup Phrase "),e.qZA()(),e.TgZ(4,"div",19)(5,"p"),e._uU(6," \u{1f512} "),e.TgZ(7,"strong"),e._uU(8,"Why this is important:"),e.qZA(),e._uU(9," Your backup phrase is the master key to your financial data and bank transaction encryptions. It's like a secret spell to safeguard your treasures! "),e.qZA(),e.TgZ(10,"p"),e._uU(11," \u{1f4dd} Write down these magic words and keep them in a safe place, like a locked drawer or a personal safe. You'll need them to recover your data, ensuring your financial information stays private and secure! "),e.qZA()(),e.TgZ(12,"div",20)(13,"div",21),e._uU(14),e.qZA(),e.TgZ(15,"div",22),e._uU(16,"-"),e.qZA(),e.TgZ(17,"div",21),e._uU(18),e.qZA(),e.TgZ(19,"div",22),e._uU(20,"-"),e.qZA(),e.TgZ(21,"div",21),e._uU(22),e.qZA()(),e.TgZ(23,"div",23)(24,"app-login-button",24),e.NdJ("buttonClick",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.doneShowingPhrase())}),e.qZA()()()}if(2&o){const t=e.oxw();e.Q6J("@showPhrase",void 0),e.xp6(14),e.hij(" ",t.backupPhraseWords?t.backupPhraseWords[0]:""," "),e.xp6(4),e.hij(" ",t.backupPhraseWords?t.backupPhraseWords[1]:""," "),e.xp6(4),e.hij(" ",t.backupPhraseWords?t.backupPhraseWords[2]:""," ")}}const A=[{path:"",component:(()=>{class o{constructor(t,n,i,b,S,_){this.alertService=t,this.router=n,this.route=i,this.authService=b,this.cryptoService=S,this.userRepository=_,this.loginFocused=!1,this.state="create",this.user={name:void 0,email:void 0,password:void 0}}ngOnInit(){}signUp(){var t=this;return(0,c.Z)(function*(){try{t.verifyUserValues()}catch(n){return void t.alertService.createAndShowToast(n.message)}try{t.createAccountUser=yield t.authService.createAccount(t.user.email,t.user.password,{name:t.user.name})}catch(n){t.alertService.createAndShowToast(n.message)}try{if(!t.cryptoService.surrogateKey)throw new Error("Something went wrong");t.authService.setRefreshTokenSurrogateKey(t.cryptoService.surrogateKey)}catch{return void t.panic()}t.showPhrase()})()}navigateToLogin(){var t=this;return(0,c.Z)(function*(){t.router.navigate(["../login"],{relativeTo:t.route})})()}showPhrase(){var t=this;return(0,c.Z)(function*(){t.backupPhrase=t.cryptoService.generateBackupPhrase().toLowerCase(),t.backupPhraseWords=t.backupPhrase.split("-"),t.state="showphrase"})()}doneShowingPhrase(){var t=this;return(0,c.Z)(function*(){t.saveUserPhrase(),t.router.navigateByUrl("")})()}saveUserPhrase(){var t=this;return(0,c.Z)(function*(){if(t.backupPhrase&&t.cryptoService.surrogateKey&&t.createAccountUser)try{const{surrogateKey:n,salt:i}=yield t.cryptoService.getKDFSurrogateAndSaltFromSurrogateKey(t.backupPhrase,t.cryptoService.surrogateKey);yield t.userRepository.update(t.createAccountUser.id,{encryption_data:{surrogate_key_backup_phrase:n,backup_phrase_kdf_salt:i}})}catch(n){t.alertService.createAndShowToast(n.message)}else t.panic()})()}verifyUserValues(){if(!this.user.name||!this.user.email||!this.user.password)throw new Error("Please fill all the fields")}panic(){this.alertService.createAndShowToast("Something went wrong"),this.authService.logout(),this.router.navigateByUrl("login")}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(h.c),e.Y36(u.F0),e.Y36(u.gz),e.Y36(m.e),e.Y36(f.$),e.Y36(v.E))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-create-account"]],decls:3,vars:3,consts:[[3,"fullscreen"],["id","form-container",4,"ngIf"],["style","text-align: center",4,"ngIf"],["id","form-container"],[1,"title-container"],[1,"login-title"],[1,"login-input-container"],[1,"fullname-container"],["label","Full Name","iconName","person-outline","property","name","type","text","placeholder","Type your full name",3,"model"],[1,"username-container"],["label","Email","iconName","mail-outline","property","email","type","email","placeholder","Type your email",3,"model"],[1,"password-container"],["label","Password","iconName","lock-closed-outline","property","password","type","password","placeholder","Type your password",3,"model"],[1,"login-button-container"],["text","LET'S GET BALANCED",3,"buttonClick"],[1,"login-text-container",3,"mousedown","mouseup","click"],["expand","block",1,"signup-button"],[2,"text-align","center"],[1,"login-title",2,"font-family","'Courier New', Courier, monospace","color","#000"],["id","phrase-instructions",2,"background-color","#e8f0fe","padding","20px","border-radius","10px","font-family","'Arial', sans-serif","box-shadow","0 4px 8px rgba(0, 0, 0, 0.1)"],["id","phrase-container",2,"background-color","#fff","padding","20px","margin-top","20px","border-radius","10px","box-shadow","0 4px 8px rgba(0, 0, 0, 0.1)"],[1,"phrase",2,"font-family","'Courier New', Courier, monospace","color","#000"],[1,"phrase",2,"padding","10px"],[2,"width","80%","margin","40px auto 0 auto"],["text","I'VE WRITTEN THEM DOWN",3,"buttonClick"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-content",0),e.YNc(1,P,16,5,"div",1),e.YNc(2,C,25,4,"div",2),e.qZA()),2&t&&(e.Q6J("fullscreen",!0),e.xp6(1),e.Q6J("ngIf","create"==n.state),e.xp6(1),e.Q6J("ngIf","showphrase"==n.state))},dependencies:[p.O5,d.W2,y.T,x.J],styles:["ion-content[_ngcontent-%COMP%]{--background: #ffffff;font-family:Rockwell}.title-container[_ngcontent-%COMP%]{width:100%;text-align:center}.title-container[_ngcontent-%COMP%]   .login-title[_ngcontent-%COMP%]{font-size:40px}.login-input-container[_ngcontent-%COMP%]{width:90%;margin:0 auto}.fullname-container[_ngcontent-%COMP%], .username-container[_ngcontent-%COMP%]{margin-top:20px;margin-bottom:30px}.login-button-container[_ngcontent-%COMP%]{width:100%;margin-top:30px}.login-text-container[_ngcontent-%COMP%]{width:100%;text-align:center;color:#666;margin-top:20px}#phrase-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-evenly;width:min-content;margin-top:40%;margin-left:auto;margin-right:auto}.phrase[_ngcontent-%COMP%]{font-family:Rockwell;font-size:35px;color:#7f7f7f}#phrase-instructions[_ngcontent-%COMP%]{font-family:Rockwell;font-size:22px;color:#7f7f7f;width:90%;margin:60px auto 0}"],data:{animation:[(0,r.X$)("login",[(0,r.SB)("focused",(0,r.oB)({color:"#00eabb"})),(0,r.SB)("blurred",(0,r.oB)({color:"#666"})),(0,r.eR)("focused <=> blurred",[(0,r.jt)("0.1s")])]),(0,r.X$)("createForm",[(0,r.eR)(":leave",[(0,r.oB)({position:"fixed",width:"100%"}),(0,r.jt)("0.3s ease-in",(0,r.oB)({transform:"translateX(-100%)"}))])]),(0,r.X$)("showPhrase",[(0,r.eR)(":leave",[(0,r.jt)("0.3s ease-in",(0,r.oB)({transform:"translateX(0%)"}))]),(0,r.eR)(":enter",[(0,r.oB)({transform:"translateX(100%)"}),(0,r.jt)("0.3s 0.1s ease-out",(0,r.oB)({transform:"translateX(0%)"}))])])]}}),o})()}];let w=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[u.Bz.forChild(A),u.Bz]}),o})();var T=a(822);let Z=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.ez,g.u5,d.Pc,w,T.K]}),o})()}}]);