<app-header
  [chosenMonth]="chosenDate.month"
  [chosenYear]="chosenDate.year"
  (requestDateChange)="requestDateChange()"
  (addTransactionButtonClicked)="addTransaction()"
></app-header>

<ion-content [fullscreen]="true">
  <div id="budget-remaining-container">
    <span>
      <span [ngClass]="leftToBudget < 0 ? 'over-budget' : 'on-budget'">
        {{ formatCurrency(leftToBudget) }}
      </span>
      {{ leftToBudget < 0 ? 'over budget' : 'left to budget' }}
    </span>
  </div>
  <div id="planned-income-container">
    <span id="planned-income"
      ><span class="title">Remaining to Spend</span>
      <strong>{{remainingToSpend | currency}}</strong></span
    >
  </div>
  <span *ngFor="let item of categoriesArray; let i = index">
    <app-category
      [category]="item"
      [subcategories]="item.subcategories || []"
      (addNewSubEvent)="addNewSub(item)"
      [chosenDate]="chosenDate"
      (requestSaveOfSubs)="saveAllSubs()"
      (subcategorySelected)="subcategorySelected($event)"
    ></app-category>
  </span>

  <div
    id="app-draggable-container"
    *ngIf="unsortedTransactions.length > 0"
    (click)="revealUnsortedTransactions()"
  >
    <div id="transaction-counter">
      <span class="counter-number"
        >{{unsortedTransactions.length}}</span
      >
    </div>
  </div>
  <div
    class="card-container"
    [ngClass]="{ 'slide-up': isCardContainerVisible }"
  >
    <!-- Content of card container -->
    <div id="scrollable-container">
      <div
        id="card"
        *ngFor="let item of unsortedTransactions;"
        (click)="openTransactionSorter(item)"
      >
        <div id="date">{{item.date | date:'MMM. d'}}</div>
        <span id="amount">{{(item.amount * -1) | currency}}</span>
        <div id="name">{{item.merchant_name || item.name}}</div>
      </div>
    </div>
  </div>
</ion-content>
